import { CommonModule } from '@angular/common';
import { moduleMetadata } from '@storybook/angular';
import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { IonCardComponent } from '../projects/ion/src/lib/card/card.component.ts';
import { BodyMockComponent } from '../projects/ion/src/lib/card/mock/body-mock.component.ts';
import { IonSharedModule } from '../projects/ion/src/public-api';
import { IonChipModule } from '../projects/ion/src/lib/chip/chip.module';
import { IonTooltipModule } from '../projects/ion/src/lib/tooltip/tooltip.module';
import {
  TooltipPosition,
  TooltipTrigger,
  TooltipProps,
} from '../projects/ion/src/lib/core/types';

<Meta title="Ion/Data Display/Card" component={IonCardComponent} />

export const Template = (args) => <IonCardComponent {...args} />;

# Card

O IonCard pode receber 3 parâmetros, sendo eles:

- `header`. Um objeto onde é passado o titulo e os botões de ação do cabeçalho.
- `body`. Receberá o componente para renderizar no body do card.
- `footer`. Um objeto onde é passado os botões de ação do footer ou um componente.

## Header

Neste parâmetro o único atributo obrigatório é o atributo `title`.

<Canvas>
  <Story
    name="Without Buttons"
    args={{
      configuration: {
        header: {
          title: 'Com risco de atraso',
        },
      },
    }}
    decorators={[
      moduleMetadata({
        imports: [
          CommonModule,
          IonSharedModule,
          IonChipModule,
          IonTooltipModule,
        ],
      }),
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>

Há também a possibilidade de passar o paramêtro `buttons` para adicionar ações no header do card.

<Canvas>
  <Story
    name="With Buttons"
    args={{
      configuration: {
        header: {
          title: 'Com risco de atraso',
          buttons: [
            {
              type: 'ghost',
              label: '',
              circular: true,
              icon: 'refresh',
              nameAction: 'refresh',
            },
            {
              type: 'ghost',
              label: '',
              circular: true,
              icon: 'trash',
              nameAction: 'trash',
            },
          ],
        },
      },
    }}
    decorators={[
      moduleMetadata({
        imports: [
          CommonModule,
          IonSharedModule,
          IonChipModule,
          IonTooltipModule,
        ],
      }),
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>

Assim como a possibilidade de definir um ícone para o título do card, enviando o nome do ion-icon com a chave `icon`.

<Canvas>
  <Story
    name="With Icon Title"
    args={{
      configuration: {
        header: {
          title: 'Card de pesquisa',
          icon: 'search',
        },
      },
    }}
    decorators={[
      moduleMetadata({
        imports: [
          CommonModule,
          IonSharedModule,
          IonChipModule,
          IonTooltipModule,
        ],
      }),
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Body

No `body` o IonCard recebe um componente a se renderizado.

<Canvas>
  <Story
    name="With Body"
    args={{
      configuration: {
        header: {
          title: 'Com risco de atraso',
        },
        body: BodyMockComponent,
      },
    }}
    decorators={[
      moduleMetadata({
        declarations: [BodyMockComponent],
        imports: [
          CommonModule,
          IonSharedModule,
          IonChipModule,
          IonTooltipModule,
        ],
        entryComponents: [BodyMockComponent],
      }),
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Footer

No `footer` o IonCard pode receber um componente ou as configurações de botões padrões. Todos os botões emitem um evento com o nome do seu tipo.

<Canvas>
  <Story
    name="With Footer"
    args={{
      configuration: {
        header: {
          title: 'Com risco de atraso',
        },
        body: BodyMockComponent,
        footer: {
          buttons: {
            primary: { label: 'Primary' },
            secondary: { label: 'Secondary' },
            ghost: { label: 'Ghost' },
          },
        },
      },
    }}
    decorators={[
      moduleMetadata({
        declarations: [BodyMockComponent],
        imports: [
          CommonModule,
          IonSharedModule,
          IonChipModule,
          IonTooltipModule,
        ],
        entryComponents: [BodyMockComponent],
      }),
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## With Navigation Chips

Neste parâmetro, enviamos uma lista de chips.

<Canvas>
  <Story
    name="With Chips"
    args={{
      configuration: {
        header: {
          title: 'Com risco de atraso',
          chips: [{ label: 'first' }, { label: 'second' }],
        },
      },
    }}
    decorators={[
      moduleMetadata({
        imports: [
          CommonModule,
          IonSharedModule,
          IonChipModule,
          IonTooltipModule,
        ],
      }),
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Chip with dropdown

Neste parâmetro, enviamos o chip com as opções para o dropdown.

<Canvas>
  <Story
    name="With Options In Chip Dropdown"
    args={{
      configuration: {
        header: {
          title: 'O melhor animal',
          chips: [
            {
              label: 'Animais',
              options: [{ label: 'Cat' }, { label: 'Dog' }],
              icon: 'close',
            },
          ],
        },
      },
    }}
    decorators={[
      moduleMetadata({
        imports: [
          CommonModule,
          IonSharedModule,
          IonChipModule,
          IonTooltipModule,
        ],
      }),
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Info icon

Nest paramêtro o IonCard recebe as propriedades de um Tooltip para renderizar o info icon.

<Canvas>
  <Story
    name="With info icon"
    args={{
      configuration: {
        header: {
          title: 'Com risco de atraso',
          infoTooltip: {
            ionTooltipTitle: 'ionTooltipTitle',
            ionTooltipPosition: TooltipPosition.CENTER_LEFT,
            ionTooltipArrowPointAtCenter: true,
            ionTooltipColorScheme: 'dark',
            ionTooltipTrigger: TooltipTrigger.HOVER,
            ionTooltipShowDelay: 2,
          },
        },
      },
    }}
    decorators={[
      moduleMetadata({
        imports: [
          CommonModule,
          IonSharedModule,
          IonChipModule,
          IonTooltipModule,
        ],
      }),
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>
