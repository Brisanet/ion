<nav class="breadcrumbs-nav">
  <ol class="ol-navigator">
    @for (breadcrumb of breadcrumbs(); track index; let index = $index) {
      @if (!truncate() || (truncate() && index <= ellipsesIndex) || index >= breadcrumbs().length - truncateLimit) {
        <li>
          @if (truncate() && index === ellipsesIndex && breadcrumbsInDropdown().length) {
            <button class="breadcrumbs-ellipsis">
              <ion-icon
                data-testid="breadcrumbs-ellipsis"
                type="more"
                [size]="16"
                (click)="openDropdown()"
              ></ion-icon>
            </button>
          } @else {
            <button class="breacrumbs-link" (click)="onSelected(breadcrumb)">
              {{ breadcrumb.label }}
            </button>
          }

          <ion-icon
            class="icon breadcrumb-divider"
            type="right2"
            [size]="16"
          ></ion-icon>

          @if (isDropdownOpen() && index === ellipsesIndex) {
            <ion-dropdown
              data-testid="breadcrumbs-dropdown"
              class="breadcrumbs-dropdown"
              [options]="breadcrumbsInDropdown()"
              (selected)="selectDropdownItem($event)"
              (closeDropdown)="closeDropdown()"
            ></ion-dropdown>
          }
        </li>
      }
    }
  </ol>
</nav>
