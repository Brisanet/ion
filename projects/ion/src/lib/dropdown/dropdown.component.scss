@use 'dropdown.theme';

@import '../../styles/index.scss';
@import '../../styles/themes/theme.scss';

@mixin dropdown-theme($prefix) {
  background-color: ion-theme(#{$prefix}-background-color);
  color: ion-theme(#{$prefix}-text-color);

  ::ng-deep ion-icon svg {
    fill: ion-theme(#{$prefix}-icon-color);
  }
}

.options-list {
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: spacing(0.5);
}

.container-options {
  position: absolute;
  z-index: $zIndexLow;
  display: flex;
  flex-direction: column;
  gap: spacing(0.5);
  padding: 12px 8px;
  max-height: 244px;
  min-width: 182px;
  width: max-content;
  overflow-y: auto;

  background-color: ion-theme(dropdown-background-color);
  box-shadow: ion-theme(dropdown-shadow);
  border-radius: ion-theme(dropdown-border-radius);
  border: 1px solid ion-theme(dropdown-border-color);

  &--loading {
    flex-direction: column;
    justify-content: center;

    ion-spinner {
      margin: auto;
    }
  }
}

.ion-dropdown-item {
  cursor: pointer;
  padding: ion-theme(dropdown-item-padding);
  border-radius: ion-theme(dropdown-item-border-radius);

  font-family: ion-theme(dropdown-text-font-family);
  font-style: ion-theme(dropdown-text-font-style);
  font-weight: ion-theme(dropdown-text-font-weight);
  font-size: ion-theme(dropdown-text-font-size);
  line-height: ion-theme(dropdown-text-line-height);

  @include dropdown-theme(dropdown-item);

  :first-child {
    display: flex;
  }

  &:hover {
    @include dropdown-theme(dropdown-item-hover);
  }

  &:active {
    @include dropdown-theme(dropdown-item-active);
  }
}

.dropdown-item-selected {
  @include dropdown-theme(dropdown-item-selected);

  &:hover {
    @include dropdown-theme(dropdown-item-selected-hover);
  }

  &:active {
    @include dropdown-theme(dropdown-item-selected-active);
  }
}

.dropdown-disabled {
  cursor: not-allowed;

  &,
  &:hover,
  &:active {
    @include dropdown-theme(dropdown-item-disabled);
  }
}

.dropdown-disabled-selected {
  cursor: not-allowed;

  &,
  &:hover,
  &:active {
    @include dropdown-theme(dropdown-item-selected-disabled);
  }
}

.container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: spacing(1.5);
}

.option-label {
  display: flex;
  align-items: center;

  ion-icon {
    margin-right: spacing(1);
  }
}

.content {
  display: flex;
  justify-content: flex-end;
}

.dropdown-search {
  margin-bottom: 4px;

  &-input-container {
    position: relative;
    display: flex;
    align-items: center;
    background: ion-theme(input-background-color);
    border-radius: ion-theme(input-border-radius);
    border: 1px solid ion-theme(input-element-border-color);
    width: 100%;
    box-sizing: border-box;
    transition:
      border-color 0.2s,
      box-shadow 0.2s;

    &:hover {
      border-color: ion-theme(input-element-hover-border-color);
    }

    &:focus-within {
      border-color: ion-theme(input-element-active-border-color);
      box-shadow: 0 0 0 2px ion-theme(input-element-active-shadow-color);
    }

    ion-icon {
      position: absolute;
      right: spacing(1.5);
      ::ng-deep svg {
        fill: ion-theme(input-icon-color);
      }
    }
  }

  &-input {
    width: 100%;
    border: none;
    outline: none;
    background: transparent;
    padding: ion-theme(input-element-padding);
    padding-right: spacing(4.5);
    color: ion-theme(input-element-text-color);
    font-size: ion-theme(input-element-text-font-size);
    font-family: inherit;

    &::placeholder {
      color: ion-theme(input-element-placeholder-color);
      font-weight: ion-theme(input-element-placeholder-text-font-weight);
      font-size: ion-theme(input-element-placeholder-text-font-size);
    }
  }
}

.to-right {
  right: 0;
}

.clear-button {
  margin-top: 12px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  font-family: ion-theme(font-family-main);
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: all 300ms;
  border: none;
  background-color: transparent;
  color: ion-theme(primary-6);

  &:focus-visible {
    @include focus;
  }

  &.ion-btn-sm {
    height: 24px;
    min-width: 24px;
    padding: 4px 12px;
    font-size: 12px;
    line-height: 16px;
  }

  &:hover {
    background-color: ion-theme(primary-1);
    color: ion-theme(primary-5);

    ion-icon ::ng-deep svg {
      fill: ion-theme(primary-5);
    }
  }

  &:active {
    background-color: ion-theme(primary-2);
    color: ion-theme(primary-7);

    ion-icon ::ng-deep svg {
      fill: ion-theme(primary-7);
    }
  }

  ion-icon ::ng-deep svg {
    transition: fill 300ms;
    fill: ion-theme(primary-6);
  }
}

.dropdown-description {
  padding: ion-theme(dropdown-description-padding);

  font-family: ion-theme(dropdown-description-text-font-family);
  font-weight: ion-theme(dropdown-description-text-font-weight);
  font-size: ion-theme(dropdown-description-text-font-size);
  line-height: ion-theme(dropdown-description-text-line-height);
  color: ion-theme(dropdown-description-text-color);
}
