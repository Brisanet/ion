<h1>Formulário</h1>
<form [formGroup]="formGroup" #formContainer>
  <ng-container *ngFor="let field of config">
    <span [ngSwitch]="field.type">
      <div *ngSwitchCase="'text'">
        <div *ngIf="formGroup.controls[field.getKey()]">
          <label [for]="field.getKey()">
            {{ field.label }}
          </label>
          <ion-input
            [key]="field.getKey()"
            [placeholder]="field.placeholder"
            [iconInput]="field.icon"
            [formControlName]="field.getKey()"
          ></ion-input>
        </div>
      </div>
      <div *ngSwitchCase="'textarea'">
        <div *ngIf="formGroup.controls[field.getKey()]">
          <label [for]="field.getKey()">
            {{ field.label }}
          </label>
          <ion-input-area
            [key]="field.getKey()"
            [placeholder]="field.placeholder"
            [formControlName]="field.getKey()"
          ></ion-input-area>
        </div>
      </div>
    </span>

    <div
      *ngIf="
        formGroup.controls[field.getKey()]?.invalid &&
        (formGroup.controls[field.getKey()]?.dirty ||
          formGroup.controls[field.getKey()]?.touched)
      "
    >
      <span *ngIf="formGroup.controls[field.getKey()]?.errors?.required">
        Campo obrigatório!
      </span>
      <span *ngIf="formGroup.controls[field.getKey()]?.errors?.email">
        E-mail inválido.
      </span>
    </div>

    <span>Value: {{ formGroup.controls[field.getKey()]?.value }} | </span>
    <span>Valid: {{ formGroup.controls[field.getKey()]?.valid }} | </span>
    <span>Disabled: {{ formGroup.controls[field.getKey()]?.disabled }}</span>
  </ng-container>
</form>
