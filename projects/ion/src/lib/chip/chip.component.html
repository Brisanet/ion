<button
  data-testid="ion-chip"
  [id]="chipId()"
  (click)="select()"
  [disabled]="disabled()"
  [class.chip]="!displaySelected()"
  [class.chip-selected]="displaySelected()"
  [class]="'ion-chip chip-' + size()"
>
  @if ((!options().length && icon()) || (options().length && dropdownWithIcon()
  && iconPlaceholder() && iconPosition() === 'left')) {
  <ion-icon
    [attr.data-testid]="'chip-icon-' + iconPosition()"
    [attr.class]="'icon-color chip-icon-' + iconPosition()"
    [type]="(dropdownWithIcon() ? iconPlaceholder() : icon())!"
    [size]="size() === 'sm' ? 16 : 20"
  >
  </ion-icon>
  } @if (badge().value > 0 && multiple()) {
  <ion-badge
    [value]="badge().value"
    type="primary"
    data-testid="badge-multiple"
  ></ion-badge>
  }

  <div data-testid="ion-chip-label" class="container-icon-text">
    {{ placeholder() }}
  </div>

  @if (rightBadge()) {
  <ion-badge
    class="ionBadge"
    [label]="rightBadge()!.label"
    [type]="rightBadge()!.type"
  ></ion-badge>
  } @if (infoBadge()) {
  <ion-info-badge
    class="infoBadge"
    [variant]="infoBadge()!"
    size="md"
  ></ion-info-badge>
  } @if (options().length) {
  <ion-icon
    data-testid="icon-default"
    class="icon-color"
    [type]="showDropdown() ? 'semi-up' : 'semi-down'"
    [size]="size() === 'sm' ? 16 : 20"
  >
  </ion-icon>
  }
</button>
@if (showDropdown()) {
<div class="ion-chip-dropdown" [id]="dropdownId()">
  <ion-dropdown
    [options]="options()"
    [multiple]="multiple()"
    [required]="required()"
    [enableSearch]="dropdownSearchConfig()?.enableSearch || false"
    [searchOptions]="dropdownSearchConfig()?.searchOptions"
    [closeOnClickOutside]="!showToggle()"
    (searchChange)="dropdownSearchChange($event)"
    (selected)="selectDropdownItem($event)"
    (clearBadgeValue)="clearBadgeValue()"
    (closeDropdown)="closeDropdown()"
  ></ion-dropdown>
</div>
}
