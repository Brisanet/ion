<div class="bn-wizard-container">
  <div
    class="bn-wizard-content"
    [class.bn-wizard-content--horizontal]="config().horizontal"
  >
    <div>
      @if (config().steps.length > 1) {
        <div class="bn-wizard-steps">
          <ion-steps
            [steps]="stepsForIndicator()"
            [current]="currentStepIndex() + 1"
            [direction]="config().horizontal ? 'vertical' : 'horizontal'"
          ></ion-steps>
        </div>
      }

      @if (config().steps[currentStepIndex()].alert) {
        <ion-alert
          [message]="config().steps[currentStepIndex()].alert!.message"
          [hideBackground]="true"
          [type]="config().steps[currentStepIndex()].alert!.type"
        ></ion-alert>
      }
    </div>

    <div class="bn-wizard-content">
      <bn-form [formGroup]="formGroup" [fields]="currentStep.fields"></bn-form>
    </div>
  </div>

  <div class="bn-wizard-footer">
    @if (!config().hiddenCancelButton) {
      <div class="actions-left">
        <ion-button
          label="Cancelar"
          type="ghost"
          [danger]="true"
          (ionOnClick)="cancel()"
        ></ion-button>
      </div>
    }
    <div class="actions-right">
      @if (!isFirstStep()) {
        <ion-button
          label="Voltar"
          type="secondary"
          (ionOnClick)="back()"
        ></ion-button>
      }

      @if (!isLastStep()) {
        <ion-button
          [label]="currentStep.primaryButtonText || 'Continuar'"
          type="primary"
          (ionOnClick)="next()"
          [disabled]="isStepInvalid()"
        ></ion-button>
      } @else {
        <ion-button
          [label]="currentStep.primaryButtonText || 'Finalizar'"
          type="primary"
          (ionOnClick)="finish()"
          [disabled]="formGroup.invalid"
          [loading]="!!config().isLoading"
        ></ion-button>
      }
    </div>
  </div>
</div>
