@import '../../styles/index.scss';
@import '../../styles/themes/theme.scss';

$sizes: sm md lg xl;
$variants: primary secondary ghost dashed;

@mixin button-style($prefix) {
  background-color: ion-theme(#{$prefix}-background-color);
  color: ion-theme(#{$prefix}-text-color);
  border: ion-theme(#{$prefix}-border);

  span.spinner {
    border-left-color: ion-theme(#{$prefix}-spinner-color);
  }

  ion-icon {
    ::ng-deep svg {
      fill: ion-theme(#{$prefix}-icon-color);
    }
  }
}

button {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  font-family: ion-theme(button-text-font-family);
  font-weight: ion-theme(button-text-font-weight);
  border-radius: ion-theme(button-border-radius);
  cursor: pointer;
  transition: all 300ms;

  &:focus-visible {
    @include focus;
  }
}

@each $size in $sizes {
  .ion-btn-#{$size} {
    height: ion-theme(button-size-#{$size}-size);
    min-width: ion-theme(button-size-#{$size}-size);
    padding: ion-theme(button-size-#{$size}-padding);

    .spinner {
      width: ion-theme(button-size-#{$size}-spinner-size);
      height: ion-theme(button-size-#{$size}-spinner-size);
    }

    span {
      font-size: ion-theme(button-size-#{$size}-text-font-size);
      line-height: ion-theme(button-size-#{$size}-text-line-height);
    }

    &.circular-button {
      height: ion-theme(button-size-#{$size}-size);
      width: ion-theme(button-size-#{$size}-size);
      border-radius: 50%;
      padding: 0;

      .spinner {
        margin-right: 0;
      }
    }
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.loading {
  cursor: not-allowed;
  padding: 0 24px;
}

.spinner {
  border: 2px solid transparent;
  border-left-color: $primary-color;
  border-radius: 50%;
  width: 16px;
  height: 16px;
  animation: spin 1s linear infinite;
  margin-right: 10px;
}

.danger {
  span.spinner {
    border-left-color: $negative-6;
  }

  &:hover {
    span.spinner {
      border-left-color: $negative-5;
    }
  }
}

@each $variant in $variants {
  .ion-btn-#{$variant} {
    @include button-style(button-#{$variant});

    &:hover {
      @include button-style(button-#{$variant}-hover);
    }

    &:active {
      @include button-style(button-#{$variant}-active);
    }

    &.loading {
      @include button-style(button-#{$variant}-loading);
    }

    &.danger {
      background-color: ion-theme(button-#{$variant}-background-color-danger);

      &:hover {
        background-color: ion-theme(
          button-#{$variant}-background-color-hover-danger
        );
      }

      &.loading {
        background-color: ion-theme(
          button-#{$variant}-background-color-loading-danger
        );
      }

      &:active {
        background-color: ion-theme(
          button-#{$variant}-background-color-active-danger
        );
      }
    }

    span.spinner {
      border-left-color: ion-theme(button-#{$variant}-spinner-color);
    }

    &:disabled,
    &:disabled:hover,
    &[disabled],
    &[disabled]:hover {
      @include button-style(button-#{$variant}-disabled);
      cursor: not-allowed;
    }
  }
}

.right-side-icon {
  flex-direction: row-reverse;
}

.ion-remove-space {
  padding: 0 !important;

  .spinner {
    margin-right: 0;
  }
}

.ion-btn-dropdown {
  z-index: 999;
  position: relative;

  ::ng-deep .container-options {
    margin-top: 4px;
  }

  &.above {
    ::ng-deep .container-options {
      bottom: auto !important;
    }
  }
}
