<button
  [attr.data-testid]="'btn-' + (_label() || id())"
  [attr.title]="tooltip() ? tooltip() : null"
  [class]="'ion-btn-' + type() + ' ion-btn-' + size()"
  [style.width]="!circularButton() && expand() ? '100%' : ''"
  [attr.loading]="loading()"
  [class.danger]="danger()"
  [class.loading]="loading()"
  [class.circular-button]="circularButton()"
  [class.ion-remove-space]="iconType() && !!!_label()"
  [class.right-side-icon]="rightSideIcon()"
  [disabled]="disabled()"
  (click)="handleClick()"
>
  @if (loading()) {
  <span class="spinner"></span>
  }

  <!-- Icon placeholder until IonIcon is migrated -->
  @if (iconType() && !loading()) {
  <ion-icon
    class="icon-right"
    [type]="iconType()!"
    [size]="options()?.length ? 16 : 24"
  ></ion-icon>
  } @if (options() && !circularButton() && !loading()) {
  <ion-icon [type]="showDropdown() ? 'semi-up' : 'semi-down'" [size]="iconSize()" class="icon"></ion-icon>
  } @if (!circularButton() && _label()) { @if (!loading() || (loading() &&
  !loadingMessage())) {
  <span>{{ _label() }}</span>
  } @if (loading() && loadingMessage()) {
  <span>{{ loadingMessage() }}</span>
  } } @if (multiple() && !loading() && !circularButton()) {
  <!-- <ion-badge [value]="buttonBadge().value" [type]="buttonBadge().type" data-testid="badge-multiple"></ion-badge> -->
  <span class="badge-placeholder">{{ buttonBadge().value }}</span>
  }
</button>

@if (!!options() && showDropdown()) {
<div class="ion-btn-dropdown" [class.above]="showDropdownAbove()">
  <ion-dropdown
    [options]="options()!"
    [multiple]="multiple()"
    [required]="dropdownConfig()?.required || false"
    [enableSearch]="dropdownConfig()?.enableSearch || false"
    [searchOptions]="dropdownConfig()?.searchOptions"
    [notShowClearButton]="dropdownConfig()?.notShowClearButton || false"
    [description]="dropdownConfig()?.description"
    (selected)="handleSelect($event)"
    (searchChange)="onSearchChange($event)"
    (clearBadgeValue)="onClearBadgeValue()"
    (closeDropdown)="onCloseDropdown()"
    data-testid="ion-dropdown"
  ></ion-dropdown>
</div>
}
