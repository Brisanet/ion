<div class="container-controls">
  <div class="container-buttons">
    <ion-button
      data-testid="btn-previous-year"
      type="ghost"
      iconType="left3"
      [circularButton]="true"
      ionTooltip
      ionTooltipTitle="Ano anterior"
      [ionTooltipPosition]="TooltipPosition.BOTTOM_CENTER"
      (ionOnClick)="handlePreviousYear()"
    ></ion-button>
    <ion-button
      data-testid="btn-previous-month"
      iconType="left2"
      [circularButton]="true"
      type="ghost"
      ionTooltip
      ionTooltipTitle="Mês anterior"
      [ionTooltipPosition]="TooltipPosition.BOTTOM_CENTER"
      (ionOnClick)="handlePreviousMonth()"
    ></ion-button>
  </div>
  <div class="container-labels">
    <label
      data-testid="label-month"
      ionTooltip
      ionTooltipTitle="Alterar mês"
      [ionTooltipPosition]="TooltipPosition.BOTTOM_CENTER"
      (click)="setVisibleContainerToChooseMonth(true)"
    >
      {{ month() || '' }}
    </label>
    -
    <label
      data-testid="label-year"
      ionTooltip
      ionTooltipTitle="Alterar ano"
      [ionTooltipPosition]="TooltipPosition.BOTTOM_CENTER"
      (click)="setVisibleContainerToChooseYear(true)"
    >
      {{ year() || '' }}
    </label>
  </div>
  <div class="container-buttons">
    <ion-button
      data-testid="btn-next-month"
      iconType="right2"
      [circularButton]="true"
      type="ghost"
      ionTooltip
      ionTooltipTitle="Próximo mês"
      [ionTooltipPosition]="TooltipPosition.BOTTOM_CENTER"
      (ionOnClick)="handleNextMonth()"
    ></ion-button>
    <ion-button
      data-testid="btn-next-year"
      type="ghost"
      iconType="right3"
      [circularButton]="true"
      ionTooltip
      ionTooltipTitle="Próximo ano"
      [ionTooltipPosition]="TooltipPosition.BOTTOM_CENTER"
      (ionOnClick)="handleNextYear()"
    ></ion-button>
  </div>
</div>

@if (showContainerToChooseMonth()) {
  <div class="container-choose-month">
    @for (month of months; track month; let i = $index) {
      <ion-button
        [label]="month"
        type="dashed"
        (ionOnClick)="handleChangeMonth(i)"
        [attr.data-testid]="'btn-month-' + i"
      ></ion-button>
    }
  </div>
}

@if (showContainerToChooseYear()) {
  <div class="container-choose-year">
    <div class="header">
      <ion-button
        data-testid="btn-show-previous-years"
        type="ghost"
        iconType="left3"
        [circularButton]="true"
        ionTooltip
        ionTooltipTitle="Anos anteriores"
        [ionTooltipPosition]="TooltipPosition.BOTTOM_CENTER"
        (ionOnClick)="handleShowPreviousYears()"
      ></ion-button>
      <span
        >{{ rangeYear()[0] }} - {{ rangeYear()[rangeYear().length - 1] }}</span
      >
      <ion-button
        data-testid="btn-show-next-years"
        type="ghost"
        iconType="right3"
        [circularButton]="true"
        ionTooltip
        ionTooltipTitle="Próximos anos"
        [ionTooltipPosition]="TooltipPosition.BOTTOM_CENTER"
        (ionOnClick)="handleShowNextYears()"
      ></ion-button>
    </div>
    <ion-divider></ion-divider>
    <div class="content">
      @for (year of rangeYear(); track year) {
        <ion-button
          [label]="year.toString()"
          type="dashed"
          (ionOnClick)="handleChangeYear(year)"
          [attr.data-testid]="'btn-year-' + year"
        ></ion-button>
      }
    </div>
  </div>
}
